<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡§∏‡•ç‡§µ‡§∞‡•ç‡§ó ‡§∏‡•ã‡§∂‡§≤</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e1e2f">
    <link rel="apple-touch-icon" href="icon-192.png">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- Auth Screens -->
        <div id="auth-screen" class="screen active">
            <div class="auth-tabs">
                <button class="tab-btn active" id="login-tab">‡§≤‡•â‡§ó‡§ø‡§®</button>
                <button class="tab-btn" id="register-tab">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞</button>
            </div>
            <div id="login-form" class="auth-form active">
                <h2>‡§∏‡•ç‡§µ‡§∞‡•ç‡§ó ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§</h2>
                <input type="text" id="login-username" placeholder="‡§Ø‡•Ç‡§ú‡§º‡§∞‡§®‡•á‡§Æ ‡§Ø‡§æ ‡§∏‡•ç‡§µ‡§∞‡•ç‡§ó ‡§®‡§Ç‡§¨‡§∞">
                <input type="password" id="login-password" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">
                <button id="login-btn">‡§≤‡•â‡§ó‡§ø‡§®</button>
                <p id="login-error" class="error"></p>
            </div>
            <div id="register-form" class="auth-form">
                <h2>‡§®‡§Ø‡§æ ‡§ñ‡§æ‡§§‡§æ ‡§¨‡§®‡§æ‡§è‡§Å</h2>
                <input type="text" id="reg-name" placeholder="‡§®‡§æ‡§Æ">
                <input type="text" id="reg-username" placeholder="‡§Ø‡•Ç‡§ú‡§º‡§∞‡§®‡•á‡§Æ (‡§Ø‡•Ç‡§®‡§ø‡§ï)">
                <input type="password" id="reg-password" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">
                <div class="dp-upload">
                    <label for="reg-dp">‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§´‡•ã‡§ü‡•ã (100 MB ‡§§‡§ï)</label>
                    <input type="file" id="reg-dp" accept="image/*">
                    <div id="dp-preview" class="dp-preview"></div>
                    <canvas id="crop-canvas" style="display:none;"></canvas>
                    <button id="crop-btn" style="display:none;">‡§ï‡•ç‡§∞‡•â‡§™ ‡§ï‡§∞‡•á‡§Ç</button>
                </div>
                <button id="register-btn">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞</button>
                <p id="register-error" class="error"></p>
            </div>
        </div>

        <!-- Main App Screen (after login) -->
        <div id="main-screen" class="screen">
            <div class="sidebar">
                <div class="user-info">
                    <img id="sidebar-dp" src="" alt="DP">
                    <span id="sidebar-name"></span>
                    <span id="sidebar-username"></span>
                </div>
                <nav>
                    <button class="nav-btn active" data-screen="feed"><i class="fas fa-newspaper"></i> ‡§´‡•Ä‡§°</button>
                    <button class="nav-btn" data-screen="chats"><i class="fas fa-comment"></i> ‡§ö‡•à‡§ü</button>
                    <button class="nav-btn" data-screen="groups"><i class="fas fa-users"></i> ‡§ó‡•ç‡§∞‡•Å‡§™</button>
                    <button class="nav-btn" data-screen="contacts"><i class="fas fa-address-book"></i> ‡§ï‡•â‡§®‡•ç‡§ü‡•à‡§ï‡•ç‡§ü</button>
                    <button class="nav-btn" data-screen="settings"><i class="fas fa-cog"></i> ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó</button>
                </nav>
                <button id="logout-btn"><i class="fas fa-sign-out-alt"></i> ‡§≤‡•â‡§ó‡§Ü‡§â‡§ü</button>
            </div>
            <div class="main-content">
                <!-- Feed Screen -->
                <div id="feed-screen" class="content-screen active">
                    <div class="create-post">
                        <textarea id="post-content" placeholder="‡§ï‡•Å‡§õ ‡§∏‡•ã‡§ö ‡§∞‡§π‡•á ‡§π‡•ã?"></textarea>
                        <input type="file" id="post-media" accept="image/*,video/*,audio/*">
                        <button id="post-btn">‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                    <div id="feed-posts"></div>
                </div>

                <!-- Chats Screen -->
                <div id="chats-screen" class="content-screen">
                    <div class="chat-list" id="chat-list"></div>
                    <div class="chat-window" id="chat-window" style="display:none;">
                        <div class="chat-header">
                            <button id="back-to-chats"><i class="fas fa-arrow-left"></i></button>
                            <span id="chat-with"></span>
                        </div>
                        <div class="messages" id="messages"></div>
                        <div class="message-input">
                            <input type="text" id="message-text" placeholder="‡§Æ‡•à‡§∏‡•á‡§ú ‡§≤‡§ø‡§ñ‡•ã...">
                            <button id="send-message"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>

                <!-- Groups Screen -->
                <div id="groups-screen" class="content-screen">
                    <button id="create-group-btn"><i class="fas fa-plus"></i> ‡§®‡§Ø‡§æ ‡§ó‡•ç‡§∞‡•Å‡§™</button>
                    <div class="group-list" id="group-list"></div>
                    <div class="group-window" id="group-window" style="display:none;">
                        <div class="group-header">
                            <button id="back-to-groups"><i class="fas fa-arrow-left"></i></button>
                            <span id="group-name"></span>
                            <button id="group-info-btn"><i class="fas fa-info-circle"></i></button>
                        </div>
                        <div class="group-messages" id="group-messages"></div>
                        <div class="group-input">
                            <input type="text" id="group-message-text" placeholder="‡§ó‡•ç‡§∞‡•Å‡§™ ‡§Æ‡•á‡§Ç ‡§Æ‡•à‡§∏‡•á‡§ú...">
                            <button id="send-group-message"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>

                <!-- Contacts Screen -->
                <div id="contacts-screen" class="content-screen">
                    <div class="add-contact">
                        <input type="text" id="contact-phone" placeholder="‡§∏‡•ç‡§µ‡§∞‡•ç‡§ó ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç">
                        <input type="text" id="contact-name" placeholder="‡§®‡§æ‡§Æ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç">
                        <button id="add-contact-btn">‡§ï‡•â‡§®‡•ç‡§ü‡•à‡§ï‡•ç‡§ü ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                    <div class="contact-list" id="contact-list"></div>
                </div>

                <!-- Settings Screen -->
                <div id="settings-screen" class="content-screen">
                    <h3>‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó</h3>
                    <input type="text" id="settings-name" placeholder="‡§®‡§æ‡§Æ">
                    <input type="text" id="settings-username" placeholder="‡§Ø‡•Ç‡§ú‡§º‡§∞‡§®‡•á‡§Æ">
                    <input type="file" id="settings-dp" accept="image/*">
                    <img id="settings-dp-preview" src="" alt="Preview" style="width:100px;">
                    <button id="update-profile">‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
                    
                    <h3>‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§¶‡§≤‡•á‡§Ç</h3>
                    <input type="password" id="old-password" placeholder="‡§™‡•Å‡§∞‡§æ‡§®‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">
                    <input type="password" id="new-password" placeholder="‡§®‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">
                    <button id="change-password">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§¶‡§≤‡•á‡§Ç</button>

                    <h3>‡§ï‡•ç‡§∞‡§ø‡§è‡§ü‡§∞</h3>
                    <p>Amar Kumar</p>
                </div>
            </div>
        </div>

        <!-- Bot World Chat (hidden for normal users, only visible when logged in as bot) -->
        <div id="bot-screen" class="screen" style="display:none;">
            <div class="bot-header">
                <h2>üåç World Chat (‡§¨‡•â‡§ü)</h2>
            </div>
            <div class="bot-messages" id="bot-messages"></div>
            <div class="bot-input">
                <input type="text" id="bot-message" placeholder="‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§ï‡•ã ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≠‡•á‡§ú‡•á‡§Ç...">
                <button id="send-bot-message">‡§≠‡•á‡§ú‡•á‡§Ç</button>
            </div>
        </div>
    </div>

    <!-- PWA service worker registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
            .then(reg => console.log('Service Worker registered'))
            .catch(err => console.log('Service Worker error', err));
        }
    </script>
    <!-- Socket.io client -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
  </html>
